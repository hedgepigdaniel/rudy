{"version":3,"sources":["../../src/history/MemoryHistory.js"],"names":["isServer","History","restoreHistory","saveHistory","toEntries","MemoryHistory","opts","options","i","initialIndex","ents","initialEntries","n","initialN","useSession","testBrowser","restore","save"],"mappings":";;;;;;;;;;;;;;;;;;AACA,SAASA,QAAT,QAAyB,0BAAzB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,cAAT,EAAyBC,WAAzB,QAA4C,SAA5C;AACA,SAASC,SAAT,QAA0B,UAA1B,C,CAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;IAEqBC,a;;;;;;;;;;;;;+BACR;AAAA,UACQC,IADR,GACiB,IADjB,CACDC,OADC;AAAA,UAEaC,CAFb,GAEsDF,IAFtD,CAEDG,YAFC;AAAA,UAEgCC,IAFhC,GAEsDJ,IAFtD,CAEgBK,cAFhB;AAAA,UAEgDC,CAFhD,GAEsDN,IAFtD,CAEsCO,QAFtC;AAGT,UAAMC,UAAU,GAAG,CAACd,QAAQ,EAAT,IAAeM,IAAI,CAACS,WAAL,KAAqB,KAAvD;AAEAT,MAAAA,IAAI,CAACU,OAAL,GAAeV,IAAI,CAACU,OAAL,IAAiBF,UAAU,IAAIZ,cAA9C;AACAI,MAAAA,IAAI,CAACW,IAAL,GAAYX,IAAI,CAACW,IAAL,IAAcH,UAAU,IAAIX,WAAxC;AAEA,aAAOG,IAAI,CAACU,OAAL,GAAeV,IAAI,CAACU,OAAL,CAAa,IAAb,CAAf,GAAoCZ,SAAS,CAAC,IAAD,EAAOM,IAAP,EAAaF,CAAb,EAAgBI,CAAhB,CAApD,CARS,CAQ8D;AACxE;;;;EAVwCX,O;;SAAtBI,a","sourcesContent":["// @flow\nimport { isServer } from '@respond-framework/utils'\nimport History from './History'\nimport { restoreHistory, saveHistory } from './utils'\nimport { toEntries } from '../utils'\n\n// Even though this is used primarily in environments without `window` (server + React Native),\n// it's also used as a fallback in browsers lacking the `history` API (<=IE9). In that now rare case,\n// the URL won't change once you enter the site, however, if you forward or back out of the site\n// we restore entries from `sessionStorage`. So essentially the application behavior is identical\n// to browsers with `history` except the URL doesn't change.\n\n// `initialEntries` can be:\n// [path, path, etc] or: path\n// [action, action, etc] or: action\n// [[path, state, key?], [path, state, key?], etc] or: [path, state, key?]\n// or any combination of different kinds\n\nexport default class MemoryHistory extends History {\n  _restore() {\n    const { options: opts } = this\n    const { initialIndex: i, initialEntries: ents, initialN: n } = opts\n    const useSession = !isServer() && opts.testBrowser !== false\n\n    opts.restore = opts.restore || (useSession && restoreHistory)\n    opts.save = opts.save || (useSession && saveHistory)\n\n    return opts.restore ? opts.restore(this) : toEntries(this, ents, i, n) // when used as a browser fallback, we restore from sessionStorage\n  }\n}\n"],"file":"MemoryHistory.js"}